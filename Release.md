# QuantumLog ç‰ˆæœ¬å‘å¸ƒè¯´æ˜

## ç‰ˆæœ¬ 0.3.2 - å®‰å…¨åŠ å›ºä¸æ€§èƒ½ä¼˜åŒ– ğŸ”’âš¡

**å‘å¸ƒæ—¥æœŸ**: 2025å¹´8æœˆ19æ—¥

### ğŸ¯ é‡å¤§æ›´æ–°
\
**ğŸ“Š InfluxDB æ—¶åºæ•°æ®åº“æ”¯æŒ**\
- æ–°å¢å®Œæ•´çš„ InfluxDB Sink å®ç°ï¼Œæ”¯æŒé«˜æ€§èƒ½æ—¶åºæ•°æ®å†™å…¥\
- å…¼å®¹ InfluxDB 1.x å’Œ 2.x ç‰ˆæœ¬ï¼Œæ”¯æŒå¤šç§è®¤è¯æ–¹å¼\
- æ‰¹é‡å†™å…¥å’Œå¼‚æ­¥å¤„ç†æ¶æ„ï¼Œä¼˜åŒ–å¤§è§„æ¨¡æ•°æ®åœºæ™¯æ€§èƒ½\
- ä¸º HPC å’Œç›‘æ§åœºæ™¯æä¾›ä¸“ä¸šçš„æ—¶åºæ—¥å¿—å­˜å‚¨è§£å†³æ–¹æ¡ˆ\
\
**ğŸ—ï¸ é¡¹ç›®æ¶æ„é‡æ„**\
- åˆ›å»ºç‹¬ç«‹çš„ `examples` crateï¼Œæä¾›å®Œæ•´çš„æµ‹è¯•å’Œç¤ºä¾‹ç¯å¢ƒ\
- åˆå¹¶å’Œä¼˜åŒ– `test/` å’Œ `examples/` ç›®å½•ç»“æ„\
- æ¯ä¸ª sink ç±»å‹éƒ½æœ‰ä¸“é—¨çš„æµ‹è¯•æ ·ä¾‹å’Œå®Œæ•´æ–‡æ¡£\
- æå‡ä»£ç ç»„ç»‡æ€§å’Œå¯ç»´æŠ¤æ€§

è¿™æ˜¯ QuantumLog çš„ä¸€ä¸ªé‡è¦å®‰å…¨å’Œæ€§èƒ½ä¼˜åŒ–ç‰ˆæœ¬ï¼Œä¸“æ³¨äºç”Ÿäº§ç¯å¢ƒçš„ç¨³å®šæ€§å’Œå®‰å…¨æ€§æå‡ã€‚

### ğŸ”’ å®‰å…¨åŠ å›º

- **æ•°æ®åº“è¿æ¥å­—ç¬¦ä¸²è„±æ•**: é˜²æ­¢æ•æ„Ÿä¿¡æ¯æ³„éœ²åˆ°æ—¥å¿—ä¸­
- **æ–‡ä»¶æƒé™å®‰å…¨æ£€æŸ¥**: ç¡®ä¿æ—¥å¿—æ–‡ä»¶è®¿é—®æƒé™æ­£ç¡®è®¾ç½®
- **ç¼“å†²åŒºæº¢å‡ºä¿æŠ¤**: å¢å¼ºå†…å­˜å®‰å…¨æ€§ï¼Œé˜²æ­¢æ½œåœ¨çš„å®‰å…¨æ¼æ´
- **TLSç½‘ç»œä¼ è¾“åŠ å¯†**: å…¨é¢æ”¯æŒTLS/SSLåŠ å¯†ä¼ è¾“ï¼Œä¿éšœæ•°æ®å®‰å…¨
  - æ”¯æŒTLSè¯ä¹¦éªŒè¯ï¼ˆæœåŠ¡å™¨è¯ä¹¦å’Œä¸»æœºåéªŒè¯ï¼‰
  - æ”¯æŒè‡ªå®šä¹‰CAè¯ä¹¦æ–‡ä»¶
  - æ”¯æŒå®¢æˆ·ç«¯è¯ä¹¦è®¤è¯
  - å¯é…ç½®çš„TLSéªŒè¯ç­–ç•¥
- **ç½‘ç»œè¿æ¥å®‰å…¨å¢å¼º**: æ”¹è¿›ç½‘ç»œè¿æ¥çš„å®‰å…¨æ€§å’Œå¯é æ€§
- **èµ„æºæ¸…ç†æœºåˆ¶**: é˜²æ­¢èµ„æºæ³„éœ²ï¼Œæé«˜ç³»ç»Ÿç¨³å®šæ€§
- **é…ç½®éªŒè¯å¢å¼º**: æé«˜é…ç½®æ–‡ä»¶çš„å®‰å…¨æ€§éªŒè¯

### âš¡ æ€§èƒ½ä¼˜åŒ–

- **å‡å°‘å­—ç¬¦ä¸²åˆ†é…**: ä¼˜åŒ–å­—ç¬¦ä¸²æ“ä½œï¼Œå‡å°‘ä¸å¿…è¦çš„å†…å­˜åˆ†é…
- **HashMapè½¬æ¢ä¼˜åŒ–**: æå‡æ•°æ®ç»“æ„è½¬æ¢æ•ˆç‡
- **æ•°æ®åº“æ“ä½œä¼˜åŒ–**: æ”¹è¿›æ•°æ®åº“è¿æ¥å’ŒæŸ¥è¯¢æ€§èƒ½
- **æ–‡ä»¶è·¯å¾„å¤„ç†ä¼˜åŒ–**: æå‡æ–‡ä»¶æ“ä½œçš„æ‰§è¡Œæ•ˆç‡
- **å†…å­˜åˆ†é…ä¼˜åŒ–**: å‡å°‘è¿è¡Œæ—¶å†…å­˜å¼€é”€

### ğŸ› ï¸ ä»£ç è´¨é‡æ”¹è¿›

- **ç½‘ç»œæ¨¡å—TLSå®‰å…¨å¢å¼º**: å®Œæ•´å®ç°TLSåŠ å¯†ä¼ è¾“åŠŸèƒ½
  - æ–°å¢TLSé…ç½®å­—æ®µï¼š`tls_verify_certificates`ã€`tls_verify_hostname`ã€`tls_ca_file`ã€`tls_cert_file`ã€`tls_key_file`
  - å®ç°è‡ªå®šä¹‰TLSéªŒè¯å™¨ï¼Œæ”¯æŒçµæ´»çš„è¯ä¹¦éªŒè¯ç­–ç•¥
  - ä¼˜åŒ–ç½‘ç»œé‡è¿æœºåˆ¶ï¼š`max_reconnect_attempts`ã€`reconnect_delay_ms`
- **ä¿®å¤QuantumLoggerConfigå­—æ®µç¼ºå¤±**: å®Œå–„é…ç½®ç»“æ„ä½“å®šä¹‰
- **ä¿®å¤PipelineBuilderå¯¼å…¥é—®é¢˜**: è§£å†³æ¨¡å—å¯¼å…¥å†²çª
- **ç§»é™¤æœªä½¿ç”¨ä»£ç **: æ¸…ç†æœªä½¿ç”¨çš„å¯¼å…¥å’Œå˜é‡
- **é€šè¿‡cargo auditå®‰å…¨æ£€æŸ¥**: ç¡®ä¿ä¾èµ–åº“å®‰å…¨æ€§
- **æ‰€æœ‰æµ‹è¯•ç”¨ä¾‹é€šè¿‡**: ä¿è¯ä»£ç è´¨é‡å’ŒåŠŸèƒ½å®Œæ•´æ€§

### ğŸ“š æ–‡æ¡£æ›´æ–°

- **ç»Ÿä¸€ç‰ˆæœ¬å·å¼•ç”¨**: ç¡®ä¿æ‰€æœ‰æ–‡æ¡£ä¸­ç‰ˆæœ¬å·çš„ä¸€è‡´æ€§
- **æ›´æ–°ç¤ºä¾‹ä»£ç **: æä¾›æœ€æ–°çš„ä½¿ç”¨ç¤ºä¾‹
- **å®Œå–„å®‰å…¨ä½¿ç”¨æŒ‡å—**: å¢åŠ å®‰å…¨æœ€ä½³å®è·µè¯´æ˜

### ğŸ”„ è¿ç§»æŒ‡å—

#### ä» 0.3.0 è¿ç§»

1. **æ— éœ€ä¿®æ”¹ç°æœ‰ä»£ç ** - æ‰€æœ‰ç°æœ‰ API ä¿æŒå…¼å®¹
2. **é…ç½®æ–‡ä»¶æ£€æŸ¥** - å»ºè®®æ£€æŸ¥é…ç½®æ–‡ä»¶çš„å®‰å…¨æ€§è®¾ç½®
3. **ä¾èµ–æ›´æ–°** - è¿è¡Œ `cargo update` æ›´æ–°åˆ°æœ€æ–°ç‰ˆæœ¬

> **è¿ç§»æç¤ºï¼ˆMPI åŠ¨æ€åŠ è½½ï¼‰**: è‡ª 0.3.2 èµ·ï¼Œè¿è¡Œæ—¶ä»£ç ä¸å†è¯»å–è‡ªå®šä¹‰ `MPI_LIB_PATH` å˜é‡ï¼›è¯·ä½¿ç”¨å¹³å°æ ‡å‡†ç¯å¢ƒå˜é‡ï¼ˆ`LD_LIBRARY_PATH`/`PATH`/`DYLD_LIBRARY_PATH`ï¼‰è¦†ç›–æˆ–æŒ‡å®šåº“è·¯å¾„ã€‚`MPI_LIB_PATH` ä»…ä½œä¸ºæ„å»ºé˜¶æ®µçš„æç¤ºæ€§è¾“å‡ºï¼Œè¿è¡Œæ—¶ä¸ä¾èµ–è¯¥å˜é‡ã€‚

### ğŸ§ª æµ‹è¯•è¦†ç›–

- ä¸ºæ‰€æœ‰å®‰å…¨ä¿®å¤æ·»åŠ äº†ä¸“é—¨çš„æµ‹è¯•ç”¨ä¾‹
- æ€§èƒ½ä¼˜åŒ–çš„åŸºå‡†æµ‹è¯•éªŒè¯
- å•å…ƒæµ‹è¯•è¦†ç›–ç‡ä¿æŒ > 90%
- é›†æˆæµ‹è¯•ç¡®ä¿ç³»ç»Ÿç¨³å®šæ€§
- å®‰å…¨æ¼æ´æ‰«æé€šè¿‡

### ğŸ“¦ ä¾èµ–æ›´æ–°

- æ›´æ–°æ‰€æœ‰ä¾èµ–åˆ°æœ€æ–°å®‰å…¨ç‰ˆæœ¬
- é€šè¿‡ `cargo audit` å®‰å…¨å®¡è®¡
- ç§»é™¤ä¸å¿…è¦çš„ä¾èµ–é¡¹

### ğŸš€ ä½¿ç”¨ç¤ºä¾‹

#### TLSç½‘ç»œä¼ è¾“é…ç½®ç¤ºä¾‹

```rust
use quantum_log::config::{QuantumLoggerConfig, NetworkConfig};
use quantum_log::sinks::NetworkSink;

// å¯ç”¨TLSçš„ç½‘ç»œé…ç½®
let network_config = NetworkConfig {
    address: "secure-log-server.example.com:8443".to_string(),
    protocol: "tcp".to_string(),
    timeout_ms: 5000,
    max_reconnect_attempts: 3,
    reconnect_delay_ms: 1000,
    // TLSå®‰å…¨é…ç½®
    tls_verify_certificates: true,
    tls_verify_hostname: true,
    tls_ca_file: Some("/path/to/ca-cert.pem".to_string()),
    tls_cert_file: Some("/path/to/client-cert.pem".to_string()),
    tls_key_file: Some("/path/to/client-key.pem".to_string()),
};

// åˆ›å»ºå¯ç”¨TLSçš„ç½‘ç»œSink
let network_sink = NetworkSink::new(network_config).await?;
```

#### å®‰å…¨é…ç½®ç¤ºä¾‹

```rust
use quantum_log::config::QuantumLoggerConfig;

let config = QuantumLoggerConfig {
    // å¯ç”¨TLSç‰¹æ€§
    enable_tls: true,
    // å…¶ä»–å®‰å…¨é…ç½®
    mask_sensitive_data: true,
    validate_file_permissions: true,
    ..Default::default()
};
```

### ğŸ› å·²ä¿®å¤é—®é¢˜

- ä¿®å¤äº†æ•°æ®åº“è¿æ¥å­—ç¬¦ä¸²å¯èƒ½æ³„éœ²çš„å®‰å…¨é—®é¢˜
- è§£å†³äº†æ–‡ä»¶æƒé™è®¾ç½®ä¸å½“çš„é—®é¢˜
- ä¿®å¤äº†æ½œåœ¨çš„ç¼“å†²åŒºæº¢å‡ºé£é™©
- è§£å†³äº†ç½‘ç»œä¼ è¾“ä¸­çš„å®‰å…¨éšæ‚£
- ä¿®å¤äº†èµ„æºæ¸…ç†ä¸å®Œæ•´çš„é—®é¢˜
- è§£å†³äº†é…ç½®éªŒè¯ä¸å……åˆ†çš„é—®é¢˜

---

## ç‰ˆæœ¬ 0.2.0 - ç»Ÿä¸€ Sink Trait ç³»ç»Ÿ ğŸš€

**å‘å¸ƒæ—¥æœŸ**: 2025å¹´07æœˆ18æ—¥

### ğŸ¯ é‡å¤§æ›´æ–°
\
**ğŸ“Š InfluxDB æ—¶åºæ•°æ®åº“æ”¯æŒ**\
- æ–°å¢å®Œæ•´çš„ InfluxDB Sink å®ç°ï¼Œæ”¯æŒé«˜æ€§èƒ½æ—¶åºæ•°æ®å†™å…¥\
- å…¼å®¹ InfluxDB 1.x å’Œ 2.x ç‰ˆæœ¬ï¼Œæ”¯æŒå¤šç§è®¤è¯æ–¹å¼\
- æ‰¹é‡å†™å…¥å’Œå¼‚æ­¥å¤„ç†æ¶æ„ï¼Œä¼˜åŒ–å¤§è§„æ¨¡æ•°æ®åœºæ™¯æ€§èƒ½\
- ä¸º HPC å’Œç›‘æ§åœºæ™¯æä¾›ä¸“ä¸šçš„æ—¶åºæ—¥å¿—å­˜å‚¨è§£å†³æ–¹æ¡ˆ\
\
**ğŸ—ï¸ é¡¹ç›®æ¶æ„é‡æ„**\
- åˆ›å»ºç‹¬ç«‹çš„ `examples` crateï¼Œæä¾›å®Œæ•´çš„æµ‹è¯•å’Œç¤ºä¾‹ç¯å¢ƒ\
- åˆå¹¶å’Œä¼˜åŒ– `test/` å’Œ `examples/` ç›®å½•ç»“æ„\
- æ¯ä¸ª sink ç±»å‹éƒ½æœ‰ä¸“é—¨çš„æµ‹è¯•æ ·ä¾‹å’Œå®Œæ•´æ–‡æ¡£\
- æå‡ä»£ç ç»„ç»‡æ€§å’Œå¯ç»´æŠ¤æ€§

è¿™æ˜¯ QuantumLog çš„ä¸€ä¸ªé‡è¦é‡Œç¨‹ç¢‘ç‰ˆæœ¬ï¼Œå¼•å…¥äº†å…¨æ–°çš„ç»Ÿä¸€ Sink Trait ç³»ç»Ÿï¼Œä¸ºæ—¥å¿—å¤„ç†æä¾›äº†æ›´å¼ºå¤§ã€æ›´çµæ´»çš„æ¶æ„ã€‚

### ğŸ¯ æ ¸å¿ƒç‰¹æ€§

#### ç»Ÿä¸€ Sink Trait ç³»ç»Ÿ

- **QuantumSink æ ¸å¿ƒ Trait**: å®šä¹‰äº†æ‰€æœ‰ Sink çš„åŸºç¡€æ¥å£
- **å¯å åŠ å‹ vs ç‹¬å å‹**: æ™ºèƒ½åŒºåˆ†ä¸åŒç±»å‹çš„ Sink
- **Pipeline ç®¡ç†**: ç»Ÿä¸€çš„ Sink ç®¡ç†å’Œåè°ƒç³»ç»Ÿ
- **å¥åº·æ£€æŸ¥**: å®æ—¶ç›‘æ§ Sink çŠ¶æ€
- **ç»Ÿè®¡ä¿¡æ¯**: è¯¦ç»†çš„æ€§èƒ½å’ŒçŠ¶æ€ç»Ÿè®¡

#### Pipeline ç®¡ç†ç³»ç»Ÿ

- **å¹¶è¡Œå¤„ç†**: æ”¯æŒå¤š Sink å¹¶è¡Œæ‰§è¡Œ
- **é”™è¯¯ç­–ç•¥**: å¯é…ç½®çš„é”™è¯¯å¤„ç†ç­–ç•¥
- **èƒŒå‹æ§åˆ¶**: æ™ºèƒ½ç¼“å†²åŒºç®¡ç†
- **ä¼˜é›…å…³é—­**: ç¡®ä¿æ•°æ®å®Œæ•´æ€§çš„å…³é—­æœºåˆ¶
- **å»ºé€ è€…æ¨¡å¼**: çµæ´»çš„é…ç½®æ¥å£

### ğŸ“‹ è¯¦ç»†æŠ€æœ¯è¯´æ˜

#### QuantumSink Trait è®¾è®¡

```rust
use quantum_log::sinks::{QuantumSink, SinkError, SinkMetadata};
use quantum_log::core::event::QuantumLogEvent;
use async_trait::async_trait;

#[async_trait]
pub trait QuantumSink: Send + Sync + std::fmt::Debug {
    type Config: Send + Sync;
    type Error: std::error::Error + Send + Sync + 'static;
    
    // æ ¸å¿ƒåŠŸèƒ½
    async fn send_event(&self, event: QuantumLogEvent) -> Result<(), Self::Error>;
    async fn shutdown(&self) -> Result<(), Self::Error>;
    async fn is_healthy(&self) -> bool;
    
    // å…ƒæ•°æ®å’Œè¯Šæ–­
    fn name(&self) -> &'static str;
    fn stats(&self) -> String;
    fn metadata(&self) -> SinkMetadata;
}
```

#### Sink ç±»å‹åŒºåˆ†

```rust
// å¯å åŠ å‹ Sink - å¯ä¸å…¶ä»– Sink ç»„åˆä½¿ç”¨
pub trait StackableSink: QuantumSink {}

// ç‹¬å å‹ Sink - ç‹¬ç«‹è¿è¡Œ
pub trait ExclusiveSink: QuantumSink {}
```

### ğŸ”§ ç°æœ‰ Sink å¢å¼º

æ‰€æœ‰ç°æœ‰ Sink éƒ½å·²å‡çº§æ”¯æŒæ–°çš„ trait ç³»ç»Ÿï¼š

- **ConsoleSink**: å®ç° StackableSink
- **StdoutSink**: å®ç° StackableSink  
- **FileSink**: å®ç° ExclusiveSink
- **NetworkSink**: å®ç° StackableSink
- **RollingFileSink**: å®ç° ExclusiveSink
- **LevelFileSink**: å®ç° ExclusiveSink

### ğŸ›¡ï¸ å‘åå…¼å®¹æ€§

- âœ… å®Œå…¨å‘åå…¼å®¹ç°æœ‰ API
- âœ… ç°æœ‰ä»£ç æ— éœ€ä¿®æ”¹å³å¯è¿è¡Œ
- âœ… æ¸è¿›å¼è¿ç§»æ”¯æŒ
- âœ… è¯¦ç»†çš„è¿ç§»æŒ‡å—

---

**å®Œæ•´æ›´æ–°æ—¥å¿—**: æŸ¥çœ‹ Git æäº¤å†å²è·å–è¯¦ç»†å˜æ›´ä¿¡æ¯

**ä¸‹è½½**: é€šè¿‡ Cargo æ›´æ–°åˆ°æœ€æ–°ç‰ˆæœ¬

```bash
cargo update quantum_log
```

**éªŒè¯å®‰è£…**:

```bash
cargo test --all-features
```

---

*QuantumLog 0.3.1 - è®©æ—¥å¿—å¤„ç†æ›´åŠ å®‰å…¨å’Œé«˜æ•ˆï¼* ğŸ”’âš¡